(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{10725:function(e,r,n){Promise.resolve().then(n.bind(n,5925)),Promise.resolve().then(n.bind(n,84148)),Promise.resolve().then(n.bind(n,22475)),Promise.resolve().then(n.t.bind(n,45027,23)),Promise.resolve().then(n.t.bind(n,63820,23)),Promise.resolve().then(n.t.bind(n,33177,23))},84148:function(e,r,n){"use strict";n.r(r),n.d(r,{Custom:function(){return m},Providers:function(){return v}});var t=n(57437),s=n(2265),o=n(81023),c=n(24302),i=n(10273),u=n(27415);let a=(0,c.xC)({reducer:{[i.gk.reducerPath]:i.gk.reducer,auth:u.ZP},devTools:!1,middleware:e=>e().concat(i.gk.middleware)}),d=async()=>{await a.dispatch(i.gk.endpoints.loadUser.initiate({},{forceRefetch:!0}))};d();var l=n(87585),f=n(63388),h=n(82749);let k=(0,f.ZP)("https://lms-server-a6cn.onrender.com/",{transports:["websocket"]});function v(e){let{children:r}=e;return(0,t.jsx)(o.zt,{store:a,children:r})}let m=e=>{let{children:r}=e,{isLoading:n}=(0,i.Ac)({}),[o,c]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{k.on("connection",()=>{}),c(!0)},[]),o)return(0,t.jsx)("div",{children:n?(0,t.jsx)(l.Z,{}):(0,t.jsx)("div",{children:(0,t.jsx)(h.SessionProvider,{children:r})})})}},87585:function(e,r,n){"use strict";var t=n(57437);n(2265),n(1622),r.Z=()=>(0,t.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,t.jsx)("div",{className:"loader"})})},22475:function(e,r,n){"use strict";n.r(r),n.d(r,{ThemeProvider:function(){return o}});var t=n(57437);n(2265);var s=n(6435);function o(e){let{children:r,...n}=e;return(0,t.jsx)(s.f,{...n,children:r})}},10273:function(e,r,n){"use strict";n.d(r,{Ac:function(){return a},gk:function(){return i}});var t=n(38324),s=n(52967),o=n(27415),c=n(11490);let i=(0,t.LC)({reducerPath:"api",baseQuery:(0,s.ni)({baseUrl:"https://lms-server-a6cn.onrender.com/api/v1",prepareHeaders:e=>{let r=c.Z.get("accessToken"),n=c.Z.get("refreshToken");return r&&e.set("access-token",r),n&&e.set("refresh-token",n),e}}),endpoints:e=>({refreshToken:e.query({query:e=>({url:"refresh",method:"GET"})}),loadUser:e.query({query:e=>({url:"me",method:"GET"}),async onQueryStarted(e,r){let{queryFulfilled:n,dispatch:t}=r;try{let e=await n;t((0,o.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}})})}),{useRefreshTokenQuery:u,useLoadUserQuery:a}=i},27415:function(e,r,n){"use strict";n.d(r,{_e:function(){return i},f0:function(){return o},nD:function(){return c}});var t=n(24302);let s=(0,t.oM)({name:"auth",initialState:{token:"",user:""},reducers:{userRegistration:(e,r)=>{e.token=r.payload.token},userLoggedIn:(e,r)=>{e.token=r.payload.accessToken,e.refreshToken=r.payload.refreshToken,e.user=r.payload.user},userLoggedOut:e=>{e.token="",e.user=""}}}),{userRegistration:o,userLoggedIn:c,userLoggedOut:i}=s.actions;r.ZP=s.reducer},1622:function(){},33177:function(){}},function(e){e.O(0,[215,702,301,971,596,744],function(){return e(e.s=10725)}),_N_E=e.O()}]);