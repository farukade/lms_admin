(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{13145:function(e,t,a){Promise.resolve().then(a.bind(a,39965))},39965:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(57437),r=a(2265),n=a(84762),o=a(56230),l=a(35691),i=a(99150),c=a(34095),u=a(10273),d=a(27415),m=a(11490);let p=u.gk.injectEndpoints({endpoints:e=>({register:e.mutation({query:e=>({url:"registration",method:"POST",body:e}),async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;s((0,d.f0)({token:e.data.activationToken}))}catch(e){console.log(e)}}}),activation:e.mutation({query:e=>{let{activation_token:t,activation_code:a}=e;return{url:"activate-user",method:"POST",body:{activation_token:t,activation_code:a}}}}),login:e.mutation({query:e=>{let{email:t,password:a}=e;return{url:"login",method:"POST",body:{email:t,password:a}}},async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;m.Z.set("accessToken",e.data.accessToken),m.Z.set("refreshToken",e.data.refreshToken),s((0,d.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log("LOGIN ERROR => ",e)}}}),socialAuth:e.mutation({query:e=>{let{email:t,name:a,avatar:s}=e;return{url:"social-auth",method:"POST",body:{email:t,name:a,avatar:s}}},async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;m.Z.set("accessToken",e.data.accessToken),m.Z.set("refreshToken",e.data.refreshToken),s((0,d.nD)({accessToken:e.data.accessToken,user:e.data.user,refreshToken:e.data.refreshToken}))}catch(e){console.log(e)}}}),logOut:e.query({query:()=>({url:"logout",method:"GET"}),async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{s((0,d._e)())}catch(e){console.log(e)}}})}),overrideExisting:!0}),{useRegisterMutation:h,useActivationMutation:x,useLoginMutation:f,useSocialAuthMutation:b,useLogOutQuery:j}=p;var g=a(5925),k=a(24033);let y=l.Ry().shape({email:l.Z_().email("Invalid email!").required("Please enter your email!"),password:l.Z_().required("Please enter your password!").min(6)});var w=e=>{let{setRoute:t,setOpen:a,refetch:n}=e,[l,u]=(0,r.useState)(!1),[d,{isSuccess:m,error:p}]=f(),h=(0,o.TA)({initialValues:{email:"",password:""},validationSchema:y,onSubmit:async e=>{let{email:t,password:a}=e;await d({email:t,password:a})}});(0,r.useEffect)(()=>{m&&(g.toast.success("Login Successfully!"),(0,k.redirect)("/admin")),p&&"data"in p&&g.toast.error(p.data.message)},[m,p]);let{errors:x,touched:b,values:j,handleChange:w,handleSubmit:v}=h;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h1",{className:"".concat(c.W.title),children:"Login with ELearning"}),(0,s.jsxs)("form",{onSubmit:v,children:[(0,s.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your Email"}),(0,s.jsx)("input",{type:"email",name:"",value:j.email,onChange:w,id:"email",placeholder:"loginmail@gmail.com",className:"".concat(x.email&&b.email&&"border-red-500"," ").concat(c.W.input)}),x.email&&b.email&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:x.email}),(0,s.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,s.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your password"}),(0,s.jsx)("input",{type:l?"text":"password",name:"password",value:j.password,onChange:w,id:"password",placeholder:"password!@%",className:"".concat(x.password&&b.password&&"border-red-500"," ").concat(c.W.input)}),l?(0,s.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>u(!1)}):(0,s.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>u(!0)}),x.password&&b.password&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:x.password})]}),(0,s.jsx)("div",{className:"w-full mt-5",children:(0,s.jsx)("input",{type:"submit",value:"Login",className:"".concat(c.W.button)})}),(0,s.jsx)("br",{})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("h5",{children:["For the first time do sign up"," ",(0,s.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Sign-up"),children:"Click Here"})]})]})};let v=l.Ry().shape({name:l.Z_().required("Please enter your name!"),email:l.Z_().email("Invalid email!").required("Please enter your email!"),password:l.Z_().required("Please enter your password!").min(6)});var N=e=>{let{setRoute:t}=e,[a,n]=(0,r.useState)(!1),[l,{data:u,error:d,isSuccess:m}]=h();(0,r.useEffect)(()=>{if(m){let e=(null==u?void 0:u.message)||"Registration successful";g.toast.success(e),t("Verification")}d&&"data"in d&&g.toast.error(d.data.message)},[m,d]);let p=(0,o.TA)({initialValues:{name:"",email:"",password:""},validationSchema:v,onSubmit:async e=>{let{name:t,email:a,password:s}=e;await l({name:t,email:a,password:s})}}),{errors:x,touched:f,values:b,handleChange:j,handleSubmit:k}=p;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h1",{className:"".concat(c.W.title),children:"Join to ELearning"}),(0,s.jsxs)("form",{onSubmit:k,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your Name"}),(0,s.jsx)("input",{type:"text",name:"",value:b.name,onChange:j,id:"name",placeholder:"johndoe",className:"".concat(x.name&&f.name&&"border-red-500"," ").concat(c.W.input)}),x.name&&f.name&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:x.name})]}),(0,s.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your Email"}),(0,s.jsx)("input",{type:"email",name:"",value:b.email,onChange:j,id:"email",placeholder:"loginmail@gmail.com",className:"".concat(x.email&&f.email&&"border-red-500"," ").concat(c.W.input)}),x.email&&f.email&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:x.email}),(0,s.jsxs)("div",{className:"w-full mt-5 relative mb-1",children:[(0,s.jsx)("label",{className:"".concat(c.W.label),htmlFor:"email",children:"Enter your password"}),(0,s.jsx)("input",{type:a?"text":"password",name:"password",value:b.password,onChange:j,id:"password",placeholder:"password!@%",className:"".concat(x.password&&f.password&&"border-red-500"," ").concat(c.W.input)}),a?(0,s.jsx)(i.Zju,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>n(!1)}):(0,s.jsx)(i.I0d,{className:"absolute bottom-3 right-2 z-1 cursor-pointer",size:20,onClick:()=>n(!0)})]}),x.password&&f.password&&(0,s.jsx)("span",{className:"text-red-500 pt-2 block",children:x.password}),(0,s.jsx)("div",{className:"w-full mt-5",children:(0,s.jsx)("input",{type:"submit",value:"Sign Up",className:"".concat(c.W.button)})}),(0,s.jsx)("br",{})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("h5",{children:["Go back to"," ",(0,s.jsx)("span",{className:"text-blue-500 cursor-pointer",onClick:()=>t("Login"),children:"login!"})]})]})},T=a(23560),S=a(81023),E=e=>{let{setRoute:t}=e,{token:a}=(0,S.v9)(e=>e.auth),[n,{isSuccess:o,error:l}]=x(),[i,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o&&(g.toast.success("Account activated successfully"),t("Login")),l&&("data"in l?(g.toast.error(l.data.message),u(!0)):console.log("An error occured:",l))},[o,l]);let d=[(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null)],[m,p]=(0,r.useState)({0:"",1:"",2:"",3:""}),h=async()=>{let e=Object.values(m).join("");if(4!==e.length){u(!0);return}await n({activation_token:a,activation_code:e})},f=(e,t)=>{var a,s;u(!1);let r={...m,[e]:t};p(r),""===t&&e>0?null===(a=d[e-1].current)||void 0===a||a.focus():1===t.length&&e<3&&(null===(s=d[e+1].current)||void 0===s||s.focus())};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"".concat(c.W.title),children:"Verify Your Account"}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"w-full flex items-center justify-center mt-2",children:(0,s.jsx)("div",{className:"w-[80px] h-[80px] rounded-full bg-[#497DF2] flex items-center justify-center",children:(0,s.jsx)(T.$5e,{size:40})})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"m-auto flex items-center justify-around",children:Object.keys(m).map((e,t)=>(0,s.jsx)("input",{type:"number",ref:d[t],className:"w-[65px] h-[65px] bg-transparent border-[3px] rounded-[10px] flex items-center text-black dark:text-white justify-center text-[18px] font-Poppins outline-none text-center ".concat(i?"shake border-red-500":"dark:border-white border-[#0000004a]"),placeholder:"",maxLength:1,value:m[e],onChange:e=>f(t,e.target.value)},e))}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)("button",{className:"".concat(c.W.button),onClick:h,children:"Verify OTP"})}),(0,s.jsx)("br",{}),(0,s.jsxs)("h5",{className:"text-center pt-4 font-Poppins text-[14px] text-black dark:text-white",children:["Go back to sign in?"," ",(0,s.jsx)("span",{className:"text-[#2190ff] pl-1 cursor-pointer",onClick:()=>t("Login"),children:"Sign in"})]})]})},P=e=>{let[t,a]=(0,r.useState)("Login"),{user:o}=(0,S.v9)(e=>e.auth);return(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{title:"ELearning - Admin",description:"ELearning is a platform for students to learn and get help from teachers",keywords:"Prograaming,MERN,Redux,Machine Learning"}),(0,s.jsxs)("div",{className:"w-[90%] md:w-[420px] m-auto h-screen flex items-center justify-center",children:["Login"===t&&(0,s.jsx)(w,{setRoute:a}),"Sign-up"===t&&(0,s.jsx)(N,{setRoute:a}),"Verification"===t&&(0,s.jsx)(E,{setRoute:a})]})]})}},34095:function(e,t,a){"use strict";a.d(t,{W:function(){return s}});let s={title:"text-[25px] text-black dark:text-white font-[500] font-Poppins text-center py-2",label:"text-[16px] font-Poppins text-black dark:text-white",input:"w-full text-black dark:text-white bg-transparent border rounded h-[40px] px-2 outline-none mt-[10px] font-Poppins",button:"flex flex-row justify-center items-center py-3 px-6 rounded-full cursor-pointer bg-[#2190ff] min-h-[45px] w-full text-[16px] font-Poppins font-semibold"}},84762:function(e,t,a){"use strict";var s=a(57437);a(2265),t.Z=e=>{let{title:t,description:a,keywords:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{children:t}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("meta",{name:"description",content:a}),(0,s.jsx)("meta",{name:"keywords",content:r})]})}},10273:function(e,t,a){"use strict";a.d(t,{Ac:function(){return c},gk:function(){return l}});var s=a(38324),r=a(52967),n=a(27415),o=a(11490);let l=(0,s.LC)({reducerPath:"api",baseQuery:(0,r.ni)({baseUrl:"https://lms-server-a6cn.onrender.com/api/v1",prepareHeaders:e=>{let t=o.Z.get("accessToken"),a=o.Z.get("refreshToken");return t&&e.set("access-token",t),a&&e.set("refresh-token",a),e}}),endpoints:e=>({refreshToken:e.query({query:e=>({url:"refresh",method:"GET"})}),loadUser:e.query({query:e=>({url:"me",method:"GET"}),async onQueryStarted(e,t){let{queryFulfilled:a,dispatch:s}=t;try{let e=await a;s((0,n.nD)({accessToken:e.data.accessToken,refreshToken:e.data.refreshToken,user:e.data.user}))}catch(e){console.log(e)}}})})}),{useRefreshTokenQuery:i,useLoadUserQuery:c}=l},27415:function(e,t,a){"use strict";a.d(t,{_e:function(){return l},f0:function(){return n},nD:function(){return o}});var s=a(24302);let r=(0,s.oM)({name:"auth",initialState:{token:"",user:""},reducers:{userRegistration:(e,t)=>{e.token=t.payload.token},userLoggedIn:(e,t)=>{e.token=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.user=t.payload.user},userLoggedOut:e=>{e.token="",e.user=""}}}),{userRegistration:n,userLoggedIn:o,userLoggedOut:l}=r.actions;t.ZP=r.reducer}},function(e){e.O(0,[712,520,215,678,971,596,744],function(){return e(e.s=13145)}),_N_E=e.O()}]);